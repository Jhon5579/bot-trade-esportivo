# .github/workflows/alerta_status.yml

name: Alerta de Status do Falcao

on:
  schedule:
    # Roda na hora exata, a cada 2 horas, dentro do seu hor√°rio de opera√ß√£o (convertido para UTC)
    # 11, 13, 15, 17, 19, 21, 23 UTC => 8h, 10h, 12h, 14h, 16h, 18h, 20h, 22h BRT
    - cron: '0 11,13,15,17,19,21,23 * * *'
  workflow_dispatch:

jobs:
  enviar-status:
    runs-on: ubuntu-latest
    steps:
      - name: Enviando mensagem de status para o Telegram
        env:
          TELEGRAM_TOKEN: ${{ secrets.TELEGRAM_TOKEN }}
          TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
        run: |
          # VERS√ÉO CORRIGIDA: Adicionado '\' antes de '!' e '.' para o MarkdownV2 do Telegram.
          curl -s -X POST https://api.telegram.org/bot$TELEGRAM_TOKEN/sendMessage \
            -d chat_id=$TELEGRAM_CHAT_ID \
            -d text="‚úÖ Estou monitorando o mercado\! O Falc√£o est√° de olho nas melhores oportunidades\. ü¶Ö" \
            -d parse_mode="MarkdownV2"
